<!DOCTYPE html>
<html lang="ro" data-lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog ‚Äî Code Design</title>
  <meta name="description" content="Articole despre web design, SEO, marketing digital »ôi tehnologie de la echipa Code Design." />
  <link rel="stylesheet" href="style.css" />
  <style>
    .blog-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem}
    .blog-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden;transition:all var(--transition);cursor:pointer;text-decoration:none;display:block;color:inherit}
    .blog-card:hover{border-color:rgba(79,110,247,0.3);transform:translateY(-4px);box-shadow:0 24px 64px rgba(0,0,0,0.4)}
    .blog-card-img{width:100%;height:200px;object-fit:cover;display:block;background:var(--bg)}
    .blog-card-img-placeholder{width:100%;height:200px;background:linear-gradient(135deg,rgba(79,110,247,0.15),rgba(79,110,247,0.05));display:flex;align-items:center;justify-content:center;font-size:2.5rem}
    .blog-card-body{padding:1.5rem}
    .blog-card-cat{font-size:0.72rem;font-weight:700;letter-spacing:0.12em;text-transform:uppercase;color:var(--accent);margin-bottom:0.6rem;display:block}
    .blog-card-title{font-family:'DM Serif Display',serif;font-size:1.2rem;line-height:1.3;margin-bottom:0.6rem;color:var(--white)}
    .blog-card-excerpt{font-size:0.88rem;color:var(--muted);line-height:1.65;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
    .blog-card-footer{display:flex;align-items:center;justify-content:space-between;margin-top:1.2rem;padding-top:1rem;border-top:1px solid var(--border)}
    .blog-card-date{font-size:0.78rem;color:var(--muted)}
    .blog-card-arrow{color:var(--accent);font-size:1rem}
    .categories-bar{display:flex;gap:0.6rem;flex-wrap:wrap;margin-bottom:2.5rem}
    .cat-btn{background:transparent;border:1px solid var(--border);color:var(--muted);padding:6px 16px;border-radius:100px;font-size:0.8rem;cursor:pointer;font-family:inherit;transition:all 0.2s}
    .cat-btn:hover,.cat-btn.active{background:var(--accent);border-color:var(--accent);color:#fff}
    .blog-empty{text-align:center;padding:4rem;color:var(--muted)}
    .blog-empty .icon{font-size:3rem;margin-bottom:1rem}
    @media(max-width:900px){.blog-grid{grid-template-columns:1fr 1fr}}
    @media(max-width:768px){.blog-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-logo"><img src="codedesign_logo_57px.png" alt="Code Design" /></a>
  <ul class="nav-links">
    <li><a href="index.html"><span class="ro">AcasƒÉ</span><span class="en">Home</span></a></li>
    <li><a href="despre-noi.html"><span class="ro">Despre Noi</span><span class="en">About Us</span></a></li>
    <li><a href="servicii.html"><span class="ro">Servicii</span><span class="en">Services</span></a></li>
    <li><a href="blog.html" class="active">Blog</a></li>
    <li><a href="contact.html">Contact</a></li>
  </ul>
  <div class="nav-right">
    <div class="lang-group">
      <button class="lang-btn active" data-lang="ro">RO</button>
      <button class="lang-btn" data-lang="en">EN</button>
    </div>
    <a href="contact.html" class="btn-cta nav-cta-btn"><span class="ro">ContacteazƒÉ-ne</span><span class="en">Contact Us</span></a>
    <button class="hamburger" aria-label="Menu" aria-expanded="false"><span></span><span></span><span></span></button>
  </div>
  <div class="mobile-menu">
    <a href="index.html"><span class="ro">AcasƒÉ</span><span class="en">Home</span></a>
    <a href="despre-noi.html"><span class="ro">Despre Noi</span><span class="en">About Us</span></a>
    <a href="servicii.html"><span class="ro">Servicii</span><span class="en">Services</span></a>
    <a href="blog.html">Blog</a>
    <a href="contact.html">Contact</a>
  </div>
</nav>

<!-- PAGE HERO -->
<div class="page-hero">
  <div class="orb" style="width:500px;height:500px;background:rgba(79,110,247,0.08);top:-100px;right:-100px"></div>
  <div class="container" style="position:relative;z-index:1">
    <span class="section-label">Blog</span>
    <h1><span class="ro">Articole &amp; <strong>Resurse</strong></span><span class="en">Articles &amp; <strong>Resources</strong></span></h1>
    <p style="color:var(--muted);margin-top:1rem;font-size:1rem;max-width:500px"><span class="ro">Sfaturi practice despre web design, SEO »ôi marketing digital pentru afacerea ta.</span><span class="en">Practical tips about web design, SEO and digital marketing for your business.</span></p>
  </div>
</div>

<!-- BLOG SECTION -->
<section>
  <div class="container">
    <!-- Categories filter -->
    <div class="categories-bar" id="categoriesBar">
      <button class="cat-btn active" data-cat="all">
        <span class="ro">Toate</span><span class="en">All</span>
      </button>
    </div>
    <!-- Posts grid -->
    <div class="blog-grid" id="blogGrid">
      <!-- Loading state -->
      <div style="grid-column:1/-1;text-align:center;padding:3rem;color:var(--muted)">
        <div style="font-size:2rem;margin-bottom:1rem">‚è≥</div>
        <span class="ro">Se √ÆncarcƒÉ articolele...</span>
        <span class="en">Loading articles...</span>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<div class="cta-section">
  <div class="container">
    <h2 class="reveal"><span class="ro">Vrei sƒÉ <strong>lucrƒÉm √ÆmpreunƒÉ?</strong></span><span class="en">Want to <strong>work together?</strong></span></h2>
    <p class="reveal"><span class="ro">ContacteazƒÉ-ne »ôi discutƒÉm despre proiectul tƒÉu.</span><span class="en">Contact us and let's discuss your project.</span></p>
    <a href="contact.html" class="btn-cta reveal" style="font-size:1rem;padding:14px 36px"><span class="ro">ContacteazƒÉ-ne ‚Üí</span><span class="en">Contact Us ‚Üí</span></a>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="container">
    <div class="footer-grid">
      <div>
        <img src="codedesign_logo_57px.png" alt="Code Design" style="height:28px;filter:brightness(0) invert(1);margin-bottom:1rem;display:block" />
        <p style="color:var(--muted);font-size:0.9rem;max-width:300px;line-height:1.7"><span class="ro">LucrƒÉm √Ændeaproape cu clien»õii no»ôtri pentru a crea branduri, nu doar site-uri.</span><span class="en">We work closely with our clients to create brands, not just websites.</span></p>
      </div>
      <div>
        <span class="footer-heading"><span class="ro">Servicii</span><span class="en">Services</span></span>
        <a href="servicii.html" class="footer-link">Web Design</a>
        <a href="servicii.html" class="footer-link">SEO</a>
        <a href="servicii.html" class="footer-link">WordPress</a>
        <a href="servicii.html" class="footer-link">Cloud &amp; Backup</a>
      </div>
      <div>
        <span class="footer-heading"><span class="ro">Companie</span><span class="en">Company</span></span>
        <a href="despre-noi.html" class="footer-link"><span class="ro">Despre Noi</span><span class="en">About Us</span></a>
        <a href="blog.html" class="footer-link">Blog</a>
        <a href="contact.html" class="footer-link">Contact</a>
        <a href="#" class="footer-link"><span class="ro">PoliticƒÉ Confiden»õialitate</span><span class="en">Privacy Policy</span></a>
      </div>
      <div>
        <span class="footer-heading">Contact</span>
        <a href="mailto:office@codedesign.ro" class="footer-link">office@codedesign.ro</a>
        <a href="tel:0040757413393" class="footer-link">0040.757.413.393</a>
        <div style="margin-top:1.5rem">
          <a href="#" class="social-btn fb">f</a>
          <a href="#" class="social-btn tw">&#120143;</a>
          <a href="#" class="social-btn li">in</a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2026 codedesign.ro &mdash; <span class="ro">Toate drepturile rezervate</span><span class="en">All rights reserved</span></p>
      <p><span class="ro">Realizat cu &#9829; √Æn Rom√¢nia</span><span class="en">Made with &#9829; in Romania</span></p>
    </div>
  </div>
</footer>

<script src="main.js"></script>
<script>
const SUPABASE_URL = 'https://pyzfilefqqyrmjhfdvgw.supabase.co';
const SUPABASE_KEY = 'sb_publishable_nH6dJS5-3iX9qv8loybgpw_iUAivA2Z';

let allPosts = [];
let currentCat = 'all';
let currentLang = localStorage.getItem('cd-lang') || 'ro';

function getLang() {
  return document.documentElement.getAttribute('data-lang') || 'ro';
}

function formatDate(dateStr) {
  const d = new Date(dateStr);
  return d.toLocaleDateString('ro-RO', { year:'numeric', month:'long', day:'numeric' });
}

function renderPosts(posts) {
  const grid = document.getElementById('blogGrid');
  const lang = getLang();
  if (!posts.length) {
    grid.innerHTML = '<div class="blog-empty" style="grid-column:1/-1"><div class="icon">üìù</div><p>' +
      (lang === 'ro' ? 'Nu existƒÉ articole √Æn aceastƒÉ categorie.' : 'No articles in this category.') + '</p></div>';
    return;
  }
  grid.innerHTML = posts.map(post => {
    const title = lang === 'ro' ? post.title_ro : (post.title_en || post.title_ro);
    const excerpt = lang === 'ro' ? post.excerpt_ro : (post.excerpt_en || post.excerpt_ro);
    const img = post.cover_image
      ? '<img class="blog-card-img" src="' + post.cover_image + '" alt="' + title + '" />'
      : '<div class="blog-card-img-placeholder">‚ú¶</div>';
    return '<a href="post.html?slug=' + post.slug + '" class="blog-card reveal">' +
      img +
      '<div class="blog-card-body">' +
        '<span class="blog-card-cat">' + post.category + '</span>' +
        '<div class="blog-card-title">' + title + '</div>' +
        '<div class="blog-card-excerpt">' + (excerpt || '') + '</div>' +
        '<div class="blog-card-footer">' +
          '<span class="blog-card-date">' + formatDate(post.created_at) + '</span>' +
          '<span class="blog-card-arrow">‚Üí</span>' +
        '</div>' +
      '</div>' +
    '</a>';
  }).join('');
}

function filterPosts(cat) {
  currentCat = cat;
  document.querySelectorAll('.cat-btn').forEach(b => b.classList.toggle('active', b.dataset.cat === cat));
  const filtered = cat === 'all' ? allPosts : allPosts.filter(p => p.category === cat);
  renderPosts(filtered);
}

async function loadCategories() {
  const res = await fetch(SUPABASE_URL + '/rest/v1/categories?select=*&order=name_ro', {
    headers: { 'apikey': SUPABASE_KEY, 'Authorization': 'Bearer ' + SUPABASE_KEY }
  });
  const cats = await res.json();
  const bar = document.getElementById('categoriesBar');
  const lang = getLang();
  cats.forEach(cat => {
    const btn = document.createElement('button');
    btn.className = 'cat-btn';
    btn.dataset.cat = cat.name_ro;
    btn.textContent = lang === 'ro' ? cat.name_ro : (cat.name_en || cat.name_ro);
    btn.addEventListener('click', () => filterPosts(cat.name_ro));
    bar.appendChild(btn);
  });
}

async function loadPosts() {
  try {
    const res = await fetch(SUPABASE_URL + '/rest/v1/posts?select=*&published=eq.true&order=created_at.desc', {
      headers: { 'apikey': SUPABASE_KEY, 'Authorization': 'Bearer ' + SUPABASE_KEY }
    });
    allPosts = await res.json();
    renderPosts(allPosts);
  } catch(e) {
    document.getElementById('blogGrid').innerHTML =
      '<div class="blog-empty" style="grid-column:1/-1"><div class="icon">‚ö†Ô∏è</div><p>Eroare la √ÆncƒÉrcarea articolelor.</p></div>';
  }
}

// Re-render when language changes
const langObserver = new MutationObserver(() => {
  filterPosts(currentCat);
  loadCategories();
});
langObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-lang'] });

loadCategories();
loadPosts();
</script>
</body>
</html>
